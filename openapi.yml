openapi: 3.0.0
servers:
  - description: SwaggerHub API Auto Mocking
    url: https://virtserver.swaggerhub.com/FLORIANHASE12/GEtit/1.0.0
  - description: Tromega Fitness API
    url: https://api.fitnessapp.gang-of-fork.de/
info:
  description: 'Fitness App Backend API Documentation'
  version: '1.0.0'
  title: 'Fitness App Backend API'
  contact:
    email: 'support@gang-of-fork.de'
tags:
  - name: Monitoring
    description: monitoring information
  - name: Account
    description: /account Endpoint
  - name: generatedTraingsplan
    description: /generetedTraingsplan Endpoint
  - name: Body
    description: /body Endpoint
  - name: Benchmarking
    description: /benchmarking Endpoint
  - name: Exercises
    description: /exercises Endpoint
  - name: LastTraining
    description: /lastTraining Endpoint
  - name: LastTrainingSession
    description: /lastTrainingSession
  - name: MyPlans
    description: /myPlans Endpoint
  - name: NextTraining
    description: /nextTraining Endpoint
  - name: TrainingDay
    description: /trainingDay Endpoint
  - name: TrainingPlan
    description: /trainingPlan Endpoint
  - name: TrainingSession
    description: /trainingSession Endpoint
paths:
  /ping:
    get:
      tags:
        - Monitoring
      summary: Get response if up
      responses:
        '200':
          description: ok
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: pong
                    
  /generatedTrainingsplan:
    post:
      tags:
        - Generated Trainingsplan
      summary: Generate new Trainingsplan for specific user
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id:
                  type: string
                numberOfTraininssession:
                  type: integer
                trainingsStatus:
                  type: string
                  enum:
                    - untrained
                    - trained
                trainingsType:
                  type: string
                  enum:
                    - withMachines
                    - withoutMachines
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema: 
                type: string
                description: UserID/_id
        '400':
          description: Bad Request
   
  /account:
    get:
      tags:
        - Account
      summary: Get Account data
      parameters: 
        - in: query
          name: googleId 
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                properties:
                  _id: 
                    type: string
                  google_id: 
                    type: string
                  name:
                    type: string
                  birthdate:
                    type: string
                    format: date
                  sex:
                    type: string
                    enum:
                      - male
                      - female
                  trainingPlans:
                    type: array
                    items:
                      type: string
        '400': 
          description: Bad Request/googleId is missing
        '404':
          description: Not found
    post:
      tags:
        - Account
      summary: Insert a new Account
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                google_id: 
                  type: string
                name:
                  type: string
                birthdate:
                  type: string
                  format: date
                sex:
                  type: string
                  enum:
                    - male
                    - female
                trainingPlans:
                  type: array
                  minLength: 0
                  items:
                    type: string
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema: 
                type: string
                description: UserID/_id
        '400':
          description: Bad Request
    put:
      tags:
        - Account
      summary: Update Account data
      parameters: []
      requestBody:
        content:
          application/json:
            schema: 
              type: object
              properties:
                _id: 
                  type: string
                google_id: 
                  type: string
                name:
                  type: string
                birthdate:
                  type: string
                  format: date
                sex:
                  type: string
                  enum:
                    - male
                    - female
                trainingPlans:
                  type: array
                  items:
                    type: string
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema: 
                type: object
                description: Updated Account
                properties:
                  _id: 
                    type: string
                  google_id: 
                    type: string
                  name:
                    type: string
                  birthdate:
                    type: string
                    format: date
                  sex:
                    type: string
                    enum:
                      - male
                      - female
                  trainingPlans:
                    type: array
                    items:
                      type: string
        '400':
          description: Bad Request

  /body:
    get:
      tags:
        - Body
      summary: Get Body data
      parameters: 
        - in: query
          name: userId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: array
                items: 
                  type: object
                  properties:
                    _id:  
                      type: string
                    userId:
                      type: string
                    height:
                      type: number
                    weight:
                      type: number
        '400':
          description: Bad Request
    post:
      tags:
        - Body
      summary: Insert new Body data
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                _id:  
                  type: string
                userId:
                  type: string
                height:
                  type: number
                weight:
                  type: number
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema: 
                type: string
                description: bodyId/_id
        '401':
          description: Not Authorized
  /benchmarking:
    get:
      tags:
        - Benchmarking
      summary: Get Benchmarking data
      parameters: 
        - in: query
          name: userId
          required: true
          schema:
            type: string
        - in: query
          name: exercise_name
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: array
                items: 
                  type: object
                  properties:
                    _id:  
                      type: string
                    userId:
                      type: string
                    date:
                      type: number
                    exercise_amount:
                      type: number
                    exercise_name:
                      type: string
                    week_counter:
                      type: number
        '400':
          description: Bad Request
    post:
      tags:
        - Benchmarking
      summary: Insert new Benchmarking data
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                _id:  
                  type: string
                userId:
                  type: string
                exercise_amount:
                  type: number
                exercise_name:
                  type: string
                week_counter:
                  type: number                  
      responses:
        '201':
          description: OK
        '401':
          description: Not Authorized
  /exercises:
    get:
      tags: 
        - Exercises
      summary: Get Exercise data
      parameters: 
        - in: query
          name: name
          required: false
          schema:
            type: string
        - in: query
          name: muscle
          required: false
          schema:
            type: string
            enum: [abs, calves, quads, lats, pectorals, glutes, hamstrings, adductors, abductors, triceps, cardiovascular system, spine, upper back, biceps, delts, forearms, traps]
        - in: query
          name: equipment
          required: false
          schema:
            type: string
            enum: [body weight, barbell, cable, assisted, rope, leverage machine, dumbbell, stability ball, ez barbell, sled machine, upper body ergometer, kettlebell, medicine ball, olympic barbell, bosu ball, resistance band, roller, wheel roller, smith machine, tire, elliptical machine, weighted]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items: 
                  type: object
                  properties:
                    _id:
                      type: string
                    equipment:
                      type: string
                    name:
                      type: string
                    muscle:
                      type: string
                    gifUrl:
                      type: string
                      format: uri 
                    instruction:
                      type: string
        '500':
          description: Internal Server Error
  /lastTraining:
    get:
      tags: 
        - LastTraining
      summary: Get Last Trainingdates
      parameters: 
        - in: query
          name: days 
          required: true
          schema:
            type: number
            minimum: 0
        - in: query
          name: userId
          required: true
          schema: 
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    date:
                      type: string
                    trained:
                      type: boolean
        '400':
          description: Bad Request
  /lastTrainingSession:
    get:
      tags:
       - LastTrainingSession
      summary: get LastTrainingSession
      parameters: 
        - in: query
          name: userId
          required: true
          schema:
            type: string
        - in: query
          name: trainingDayId
          required: true
          schema:   
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  userId:
                    type: string
                  trainingDayId:
                    type: string
                  date:
                    type: string
                    format: date
                  executions:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        exercise:
                          type: object
                          properties:
                            _id:
                              type: string
                            name:
                              type: string
                            instruction:
                              type: string
                            gifUrl:
                              type: string
                              format: uri 
                            muscle:
                              type: string
                            equipment:
                              type: string
                            __v: 
                              type: number
                        notes:
                          type: array
                          items:
                            type: string
                        sets:
                          type: array
                          items: 
                            type: object
                            properties:
                              _id:
                                type: string
                              executionType: 
                                type: string
                                enum: [working, warmup, backoff]
                              weight:
                                type: number
                              reps:
                                type: number
                              tenRM:
                                type: number
                        __v:
                          type: number
                  __v:
                    type: number

        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg: 
                    type: string
        '404': 
          description: Not Found
        '500':
          description: Internal Server Error
  /myPlans:
    get:
      tags:
        - MyPlans
      summary: Get all Trainingplans of an user.
      parameters:
        - in: query
          name: userId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema: 
                type: array 
                items: 
                  type: object
                  properties:
                    _id: 
                      type: string
                    name:
                      type: string
                    split:
                      type: number
                    trainingDays:
                      type: array
                      items:
                        type: object
                        properties:
                          _id: 
                            type: string
                          exerciseId:
                            type: object
                            properties:
                              _id: 
                                type: string
                              name:
                                type: string
                              instruction:
                                type: string
                              gifUrl:
                                type: string
                                format: uri
                              muscle:
                                type: string
                              equipment:
                                type: string
                              __v:
                                type: number
                          reps:
                            type: number
                          sets:
                            type: number
                    nextDay:
                      type: number
                    __v:
                      type: number
        '400':
          description: Bad Request
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /nextTraining:
    get:
      tags:
        - NextTraining
      summary: Get next Training
      parameters: 
        - in: query
          name: userId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  exercises:
                    type: array
                    items: 
                      type: object
                      properties:
                        _id: 
                          type: string
                        name:
                          type: string
                        exerciseId:
                          type: object
                          properties:
                            _id: 
                              type: string
                            name: 
                              type: string
                            instruction:
                              type: string
                            gifUrl:
                              type: string
                              format: uri
                            muscle:
                              type: string
                            equipment:
                              type: string
                            __v:
                              type: number
                        sets:
                          type: number
                        reps:
                          type: number
                  __v:
                    type: number
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg: 
                    type: string
  /trainingDay:
    get:
      tags:
        - TrainingDay
      summary: get specific TrainingDay
      parameters: 
        - in: query
          name: trainingDayId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  exercises:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        exerciseId:
                          type: object
                          properties:
                            _id:
                              type: string
                            name:
                              type: string
                            instruction:
                              type: string
                            gifUrl:
                              type: string
                              format: uri
                            muscle:
                              type: string
                            equipment:
                              type: string
                            __v: 
                              type: number
                        sets:
                          type: number
                        reps:
                          type: number
                  __v:
                    type: number
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: trainingDayId is missing!
        '404':
          description: Not Found 
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: Not found
    put:
      tags:
        - TrainingDay
      summary: Update TrainingDay
      parameters: 
        - in: query
          name: _id
          required: true
          schema:
            type: string
      requestBody:
        description: locally Updated Object
        content:
          application/json:
            schema:
              type: object
              properties:
                _id:
                  type: string
                name:
                  type: string
                exercises:
                  type: array
                  items:
                    type: object
                    properties:
                      _id:
                        type: string
                      exerciseId:
                        type: object
                        properties:
                          _id:
                            type: string
                          name:
                            type: string
                          instruction:
                            type: string
                          gifUrl:
                            type: string
                            format: uri
                          muscle:
                            type: string
                          equipment:
                            type: string
                          __v: 
                            type: number
                      sets:
                        type: number
                      reps:
                        type: number
                __v:
                  type: number
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                type: object
                description: updated object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  exercises:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        exerciseId:
                          type: object
                          properties:
                            _id:
                              type: string
                            name:
                              type: string
                            instruction:
                              type: string
                            gifUrl:
                              type: string
                              format: uri
                            muscle:
                              type: string
                            equipment:
                              type: string
                            __v: 
                              type: number
                        sets:
                          type: number
                        reps:
                          type: number
                  __v:
                    type: number
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: string
    post:
      tags:
        - TrainingDay
      summary: Save new TrainingDay
      requestBody:
        description: locally generated Object
        content:
            application/json:
              schema:
                type: object
                description: updated object
                properties:
                  name:
                    type: string
                  exercises:
                    type: array
                    items:
                      type: object
                      properties:
                        exerciseId:
                          type: object
                          properties:
                            _id:
                              type: string
                            name:
                              type: string
                            instruction:
                              type: string
                            gifUrl:
                              type: string
                              format: uri
                            muscle:
                              type: string
                            equipment:
                              type: string
                            __v: 
                              type: number
                        sets:
                          type: number
                        reps:
                          type: number
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                type: string
                example: 5099803df3f4948bd2f9dja5
        '401':
          description: Not Authorized

    
  /trainingPlan:
    get:
      tags:
        - TrainingPlan
      summary: Get Trainingplan
      parameters:
        - in: query
          name: trainingPlanId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  split:
                    type: number
                  trainingDays:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        name:
                          type: string
                        exercises:
                          type: array
                          items:
                            type: object
                            properties:
                              _id: 
                                type: string
                              exerciseId:
                                type: object 
                                properties:
                                  _id:
                                    type: string
                                  equipment:
                                    type: string
                                  name:
                                    type: string
                                  muscle:
                                    type: string
                                  gifUrl:
                                    type: string
                                    format: uri 
                                  instruction:
                                    type: string
                              reps:
                                type: number
                              sets:
                                type: number
                        __v:
                          type: number
                  nextDay:
                    type: number
                  __v: 
                    type: number
        '400':
          description: No trainingPlanId provided
    put:
      tags:
        - TrainingPlan
      summary: Update TrainingPlan
      parameters:
        - in: query
          name: trainingPlanId
          required: true
          schema:
            type: string
      requestBody:
        description: locally Updated Object
        content:
          application/json:
            schema:
              type: object
              properties:
                _id:
                  type: string
                name:
                  type: string
                split:
                  type: number
                trainingDays:
                  type: array
                  items:
                    type: object
                    properties:
                      _id:
                        type: string
                      name:
                        type: string
                      exercises:
                        type: array
                        items:
                          type: object
                          properties:
                            _id: 
                              type: string
                            exerciseId:
                              type: object 
                              properties:
                                _id:
                                  type: string
                                equipment:
                                  type: string
                                name:
                                  type: string
                                muscle:
                                  type: string
                                gifUrl:
                                  type: string
                                  format: uri 
                                instruction:
                                  type: string
                            reps:
                              type: number
                            sets:
                              type: number
                      __v:
                        type: number
                nextDay:
                  type: number
                __v: 
                  type: number
      responses:
        '201':
          description: Updated TrainingPlan
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  split:
                    type: number
                  trainingDays:
                    type: array
                    items:
                      type: object
                      properties:
                        _id:
                          type: string
                        name:
                          type: string
                        exercises:
                          type: array
                          items:
                            type: object
                            properties:
                              _id: 
                                type: string
                              exerciseId:
                                type: object 
                                properties:
                                  _id:
                                    type: string
                                  equipment:
                                    type: string
                                  name:
                                    type: string
                                  muscle:
                                    type: string
                                  gifUrl:
                                    type: string
                                    format: uri 
                                  instruction:
                                    type: string
                              reps:
                                type: number
                              sets:
                                type: number
                        __v:
                          type: number
                  nextDay:
                    type: number
                  __v: 
                    type: number
        '400':
          description: No trainingPlanId provided
    post:
      tags:
        - TrainingPlan
      summary: Save new TrainingPlan
      parameters:
        - in: query
          name: userId
          required: true
          schema:
            type: string
            example: 5099803df3f494add2f9dja5
      requestBody:
        description: locally generated Object
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                split:
                  type: number
                trainingDays:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                      exercises:
                        type: array
                        items:
                          type: object
                          properties:
                            exerciseId:
                              type: object 
                              properties:
                                _id:
                                  type: string
                                equipment:
                                  type: string
                                name:
                                  type: string
                                muscle:
                                  type: string
                                gifUrl:
                                  type: string
                                  format: uri 
                                instruction:
                                  type: string
                            reps:
                              type: number
                            sets:
                              type: number
                nextDay:
                  type: number
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                type: string
                description: document id
                example: 5d99802df3f4948bd2f9dja1
        '400':
          description: Bad Request
          #! stopped here
  /trainingSession:
    get:
      tags:
        - TrainingSession
      summary: Get Training Session
      parameters:
        - in: query
          name: userId
          required: true
          schema:
            type: string
        - in: query
          name: id
          required: false
          schema:
            type: array
            description: List of Session IDs to specify selection
            items:
              type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    _id: 
                      type: string
                    userId: 
                      type: string
                    trainingDayId: 
                      type: string 
                    date: 
                      type: string
                      format: date
                    executions: 
                      type: array
                      items:
                        type: object
                        properties:
                          _id:
                            type: string
                          exercise:
                            type: object
                            properties:
                              _id: 
                                type: string 
                              name: 
                                type: string
                              instruction: 
                                type: string
                              gifUrl: 
                                type: string
                                format: uri
                              muscle: 
                                type: string
                              equipment: 
                                type: string                        
                              __v:
                                type: number
                          notes: 
                            type: array
                            items:
                              type: string
                          sets: 
                            type: array
                            items:
                              type: object
                              properties:
                                _id: 
                                  type: string
                                executionType: 
                                  type: string
                                weight:
                                  type: number
                                reps: 
                                  type: number
                                tenRM: 
                                  type: number
                          __v: 
                            type: number
                    __v:
                      type: number
        '400':
          description: Bad Request
        '404':
          description: Not Found
    post:
      tags: 
        - TrainingSession
      summary: Add new Training session
      parameters:
        - in: query
          name: trainingPlanId
          required: false
          schema:
            type: string
            example: 5d99802df3f4948bd2f9daa1
      requestBody:
        required: true
        content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    userId: 
                      type: string
                    trainingDayId: 
                      type: string 
                    date: 
                      type: string
                      format: date
                    executions: 
                      type: array
                      items:
                        type: object
                        properties:
                          exercise:
                            type: object
                            properties:
                              _id:
                                type: string
                              name: 
                                type: string
                              instruction: 
                                type: string
                              gifUrl: 
                                type: string
                                format: uri
                              muscle: 
                                type: string
                              equipment: 
                                type: string
                          notes: 
                            type: array
                            items:
                              type: string
                          sets: 
                            type: array
                            items:
                              type: object
                              properties:
                                executionType: 
                                  type: string
                                weight:
                                  type: number
                                reps: 
                                  type: number
                                tenRM: 
                                  type: number
      responses:
        '201':
          description: OK
          content:
            application/json:
              schema:
                type: string
        '202':
          description: created, but nextDay not updated
          content:
            application/json:
              schema:
                type: string
        '400':
          description: Bad Request

            
components:
  schemas:
    Exercise:
      type: object
      properties:
        _id:
          type: string
          example: 5099803df3f4948bd2f98391
        name:
          type: string
          example: Bench Press
        instruction:
          type: string
          example: Push the bar.
        gifUrl:
          type: string
          format: url
          example: 'http://d205bpvrqc9yn1.cloudfront.net/0030.gif'
        muscle:
          type: string
          example: breast
        equipment:
          type: string
          example: barbell
    Execution:
      type: object
      properties:
        exercise:
          $ref: '#/components/schemas/Exercise'
        notes:
          type: array
          items:
            type: string
        sets:
          type: array
          items:
            type: object
            properties:
              executionType:
                type: string
                enum: [warmup, working, backoff]
              weight:
                type: number
                minimum: 0
                description: in kg
              reps:
                type: number
                minimum: 0
              10RM:
                type: number
                minimum: 0
    LastTraining:
      type: object
      properties:
        date:
          type: string
          format: date
          example: "2016-05-18T16:00:00Z"
        trained:
          type: boolean
          example: false
    TrainingSession:
      type: object
      properties:
        _id: 
          type: string
          example: 5099803df3f4948bd2f98548
        userId:
          type: string
          example: 5099803df3f494add2f9dja5
        trainingDayId:
          type: string
          example: 5099803df3f4948bd2f9dja5
        date:
          type: string
          format: date 
          example: "2016-05-18T16:30:00Z"
        executions:
          type: array
          items:
            $ref: '#/components/schemas/Execution'
    TrainingDay:
      type: object
      properties:
        _id:
          type: string
          example: 5099803df3f4948bd2f9dja5
        name:
          type: string
          example: Push
        exercises:
          type: array
          items:
            type: object
            properties: 
              exerciseId:
                type: string
                example: 5099803df3f4948bd2f98391
              sets:
                type: number
                minimum: 1
                example: 3
              reps:
                type: number
                minimum: 1
                example: 10
    TrainingPlan:
      type: object
      properties:
        _id:
          type: string
          example: 5d99802df3f4948bd2f9dja1
        name:
          type: string
          example: Arnold
        split:
          type: integer
          minimum: 1
          maximum: 10
          example: 6
        trainingDays:
          type: array
          minItems: 1
          maxItems: 10
          items:
            type: string
            example: 5099803df3f4948bd2f9dja5
        nextDay:
          type: integer
          minimum: 1
          maximum: 10
          example: 2
    Body:
      type: object
      properties:
        _id: 
          type: string
          example: 5099803df3f494ad2ad9dja5
        userId: 
          type: string
          example: 5099803df3f494add2f9dja5
        date:
          type: string
          format: date
          example: "2020-02-22T00:00:00Z"
        height:
          type: number
          description: Height in cm.
          example: 175
        weight:
          type: number
          description: Weight in kg.
          example: 65.5
    # Account:
    #   type: object
    #   properties:
    #     _id:
    #       type: string
    #       example: 5099803df3f494add2f9dja5
    #     google_id:
    #       type: string
    #       example: 110169484474386276334
    #     name:
    #       type: string
    #       example: Markus Ruehl
    #     birthdate:
    #       type: string
    #       format: date
    #       example: "1972-02-22T00:00:00Z"
    #     sex:
    #       type: string
    #       enum: [male, female]
    #     trainingPlans:
    #       type: array
    #       items:
    #         type: string
    #         example: 5d99802df3f4948bd2f9dja1
